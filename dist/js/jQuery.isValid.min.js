!function(e){"use strict";e.isValid=function(i,a){var t;this.init=function(){t=this,this.elem=i,this.$elem=e(i),this.settings=e.extend(!0,{},e.isValid.defaults,a),this.formID=""!==this.$elem.attr("id")?"#"+this.$elem.attr("id"):"",this.$elem.addClass("isValid"),this.FIELD_VALIDATED="isValid.fieldValidated",this.FIELD_INVALIDATED="isValid.fieldInvalidated",this.settings.submitButton=null!==this.settings.submitButton?this.settings.submitButton:e(' :input[type="submit"]',this.$elem),this.formArray=e(' :input[type="text"], :input[type="email"], :input[type="password"], :input[type="tel"], :input[type="number"], :input[type="date"], :input[type="checkbox"], textarea, select',this.$elem),l(this.settings)},this.isFormValidated=function(){return e(" .invalid",this.$elem).length?!1:!0},this.isValidField=function(e){var i=e.attr("data-field-type");if(e.prop("disabled")||"hidden"===e.attr("type")||"notrequired"===i)return!0;var a,t,r="isEmpty";return(t=this[r](e))?(this.setActiveErrorMessageFor(e,i,"required"),!t):(this.settings.customValidators[i].name&&(r=this.settings.customValidators[i].name),a=void 0!==this[r]?this[r](e):this.settings.customValidators[i].validate(e),this.setActiveErrorMessageFor(e,i,a.activeErrorType),a.isValid)},this.isEmpty=function(e){return void 0===e.val()?!0:null===e.val()?!0:0===e.val().length},this.isGeneralValid=function(e){var i,a=this.isEmpty(e);return a&&(i="required"),{isValid:!a,activeErrorType:i}},this.isLetters=function(e){var i=/^[A-Za-z ]+$/.test(e.val()),a=i?"":"invalid";return{isValid:i,activeErrorType:a}},this.isNumbers=function(e){var i=/^[0-9 ]+$/.test(e.val()),a=i?"":"invalid";return{isValid:i,activeErrorType:a}},this.isAgeValid=function(e){var i=/^[0-9 ]+$/.test(e.val())&&e.val()>0&&e.val()<150,a=i?"":"invalid";return{isValid:i,activeErrorType:a}},this.isDecimals=function(e){var i=/^(\d+\.?\d*|\.\d+)$/.test(e.val()),a=i?"":"invalid";return{isValid:i,activeErrorType:a}},this.isPasswordValid=function(e){var i,a,t=/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/,s=!0;return i=r(e.val().length,this.settings.fieldTypes.password.minLength,this.settings.fieldTypes.password.maxLength),this.settings.fieldTypes.password.numbers&&this.settings.fieldTypes.password.letters&&(s=t.test(e.val())),a=i&&!s?"format":"invalid",{isValid:i?s:!1,activeErrorType:a}},this.isPasswordConfirmValid=function(i){var a=i.val()===e(' input[data-field-type="password"]',this.$elem).val(),t=a?"":"invalid";return{isValid:a,activeErrorType:t}},this.isEmailValid=function(e){var i,a,t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,r=!0;if(e.val(e.val().replace(/\s/g,"")),i=t.test(e.val()),""!==this.settings.fieldTypes.email.domain){var s=new RegExp("@"+this.settings.fieldTypes.email.domain+"$","g");r=s.test(e.val())}return a=i&&!r?"domain":"invalid",{isValid:i?r:!1,activeErrorType:a}},this.isEmailConfirmValid=function(i){var a=i.val()===e(' input[data-field-type="email"]',this.$elem).val(),t=a?"":"invalid";return{isValid:a,activeErrorType:t}},this.isDateValid=function(e){var i,a,t,s,n=e.val(),d=new moment(n,this.settings.fieldTypes.date.format,!0);return i=d.isValid(),t=0===d._pf.charsLeftOver,this.settings.fieldTypes.date.allowFutureDates||i&&(a=r(Date.parse(d._d),0,Date.now())),i?t?a||(s="allowedDate"):s="format":s=t?"invalid":1===d._pf.unusedTokens.length||2===d._pf.unusedTokens.length&&2===d._pf.charsLeftOver?"format":"invalid",{isValid:i&&t&&a,activeErrorType:s}},this.isPostCodeValid=function(e){var i=checkPostCode(e.val()),a=i?"":"invalid";return{isValid:i,activeErrorType:a}},this.isSelectChosen=function(i){var a=!0;return null===e(i).val()?a=!1:0===i.val().length&&(a=!1),{isValid:a,activeErrorType:a?"":"required"}},this.isCheckboxTicked=function(e){var i=e.is(":checked");return{isValid:i,activeErrorType:i?"":"required"}},this.getErrorMessage=function(e,i){var a=e.data(),t=this.settings.errorTypes[i];return void 0!==a[t]?a[t]:this.settings.fieldTypes[e.data().fieldType][t]},this.setActiveErrorMessageFor=function(e,i,a){this.settings.fieldTypes[i].activeErrorMessage=this.getErrorMessage(e,a)},this.showErrorFor=function(e){if(this.settings.enableErrorMessages){var i=this.settings.fieldTypes[e.data().fieldType].activeErrorMessage;if(i)if(e.siblings(".form-error").length)d(e,i);else{var a=s(e,i),r=o(e);n(a,r,e)}else this.hideErrorFor(e)}e.addClass("invalid"),e.trigger(t.FIELD_INVALIDATED)},this.hideErrorFor=function(e){e.removeClass("invalid"),e.siblings(".form-error").remove(),e.trigger(t.FIELD_VALIDATED)};var r=function(e,i,a){return e>=i&&a>=e},s=function(e,i){return'<div class="form-error">'+i+"</div>"},n=function(e,i,a){a.parent().append(e),a.siblings(".form-error").css("width",i+"px").css("margin-left",a.position().left+"px")},d=function(e,i){e.siblings(".form-error").text(i)},o=function(i){return void 0===i.attr("aria-hidden")&&i.is(":visible")?i.outerWidth():Math.max.apply(Math,i.parent().children().map(function(){return e(this).width()}).get())},l=function(i){var a=i.fieldTypes;e.map(a,function(e,i){void 0===a[i].callbacks?a[i].callbacks={onValidated:function(e){},onInvalidated:function(e){}}:void 0===a[i].callbacks.onValidated?a[i].callbacks.onValidated=function(e){}:void 0===a[i].callbacks.onInvalidated&&(a[i].callbacks.onInvalidated=function(e){})})}},e.fn.isValid=function(i){return this.each(function(){var a=new e.isValid(this,i);e(this).data("isValid",a),a.init(),a.settings.submitButton.click(function(i){a.formArray.each(function(t,r){a.isValidField(e(r))?a.hideErrorFor(e(r)):a.showErrorFor(e(r)),a.isFormValid=a.isFormValidated(),a.isFormValid||i.preventDefault()})}),a.formArray.each(function(i,t){a.settings.validateOnBlur&&e(t).on("blur change",function(){a.isValidField(e(t))?a.hideErrorFor(e(t)):a.showErrorFor(e(t))}),e(t).on(a.FIELD_INVALIDATED,function(i){var r={isValid:!1,fieldElement:e(i.currentTarget),fieldData:e(i.currentTarget).data()};a.settings.fieldTypes[e(t).data().fieldType].callbacks.onInvalidated(r)}),e(t).on(a.FIELD_VALIDATED,function(i){var r={isValid:!0,fieldElement:e(i.currentTarget),fieldData:e(i.currentTarget).data()};a.settings.fieldTypes[e(t).data().fieldType].callbacks.onValidated(r)})})})},e.isValid.defaults={fieldTypes:{general:{requiredErrorMessage:"Field is required",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},letters:{requiredErrorMessage:"Field is required",invalidErrorMessage:"Field is letters only",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},numbers:{requiredErrorMessage:"Field is required",invalidErrorMessage:"Field is numbers only",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},age:{requiredErrorMessage:"Field is required",invalidErrorMessage:"Age is invalid",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},decimals:{requiredErrorMessage:"Field is required",invalidErrorMessage:"Field is decimals only",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},password:{minLength:6,maxLength:100,numbers:!1,letters:!0,passwordConfirm:!1,requiredErrorMessage:"Password is required",formatErrorMessage:"Password should contain numbers and letters",invalidErrorMessage:"Password should be more than 6 characters",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},passwordConfirm:{requiredErrorMessage:"Confirming your Password is required",invalidErrorMessage:"Passwords do not match",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},email:{domain:"",emailConfirm:!1,requiredErrorMessage:"Email is required",domainErrorMessage:"Email domain should be @xxxx.com",invalidErrorMessage:"Please enter a valid email address",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},emailConfirm:{requiredErrorMessage:"Confirming your Email is required",invalidErrorMessage:"Email addresses do not match",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},date:{format:"DD/MM/YYYY",allowFutureDates:!0,requiredErrorMessage:"Date is required",formatErrorMessage:"Date format doesn't match DD/MM/YYYY",invalidErrorMessage:"Please enter a valid Date",allowedDateErrorMessage:"Date not allowed",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},postCode:{requiredErrorMessage:"Post Code is required",invalidErrorMessage:"Please enter a valid Post Code",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},select:{requiredErrorMessage:"Choosing an option is required",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},checkbox:{requiredErrorMessage:"Checkbox is required",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}}},validateOnBlur:!0,enableErrorMessages:!0,submitButton:null,errorTypes:{required:"requiredErrorMessage",invalid:"invalidErrorMessage",format:"formatErrorMessage",domain:"domainErrorMessage",allowedDate:"allowedDateErrorMessage"},customValidators:{general:{name:"isGeneralValid",validate:function(){}},password:{name:"isPasswordValid",validate:function(){}},passwordConfirm:{name:"isPasswordConfirmValid",validate:function(){}},email:{name:"isEmailValid",validate:function(){}},emailConfirm:{name:"isEmailConfirmValid",validate:function(){}},date:{name:"isDateValid",validate:function(){}},letters:{name:"isLetters",validate:function(){}},numbers:{name:"isNumbers",validate:function(){}},age:{name:"isAgeValid",validate:function(){}},decimals:{name:"isDecimals",validate:function(){}},postCode:{name:"isPostCodeValid",validate:function(){}},select:{name:"isSelectChosen",validate:function(){}},checkbox:{name:"isCheckboxTicked",validate:function(){}}},onFormValidated:function(){},onFormInvalidated:function(){}}}(jQuery);var checkPostCode=function(e){var i="[abcdefghijklmnoprstuwyz]",a="[abcdefghklmnopqrstuvwxy]",t="[abcdefghjkpmnrstuvwxy]",r="[abehmnprvwxy]",s="[abdefghjlnpqrstuwxyz]",n="[abdefghjlnpqrst]",d="[abdefghjlnpqrstuwzyz]",o=[];o.push(new RegExp("^(bf1)(\\s*)([0-6]{1}"+n+"{1}"+d+"{1})$","i")),o.push(new RegExp("^("+i+"{1}"+a+"?[0-9]{1,2})(\\s*)([0-9]{1}"+s+"{2})$","i")),o.push(new RegExp("^("+i+"{1}[0-9]{1}"+t+"{1})(\\s*)([0-9]{1}"+s+"{2})$","i")),o.push(new RegExp("^("+i+"{1}"+a+"{1}?[0-9]{1}"+r+"{1})(\\s*)([0-9]{1}"+s+"{2})$","i")),o.push(/^(GIR)(\s*)(0AA)$/i),o.push(/^(bfpo)(\s*)([0-9]{1,4})$/i),o.push(/^(bfpo)(\s*)(c\/o\s*[0-9]{1,3})$/i),o.push(/^([A-Z]{4})(\s*)(1ZZ)$/i),o.push(/^(ai-2640)$/i);for(var l=e,u=!1,c=0;c<o.length;c++)if(o[c].test(l)){o[c].exec(l),l=RegExp.$1.toUpperCase()+" "+RegExp.$3.toUpperCase(),l=l.replace(/C\/O\s*/,"c/o "),"AI-2640"==e.toUpperCase()&&(l="AI-2640"),u=!0;break}return u?l:!1};