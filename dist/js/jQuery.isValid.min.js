!function(e){"use strict";e.isValid=function(i,r){var s;this.init=function(){s=this,this.elem=i,this.$elem=e(i),this.isFieldValid=!1,this.options=e.extend(!0,{},e.isValid.defaults,r),this.formID="#"+this.$elem.attr("id"),this.$elem.addClass("isValid"),this.formArray=e(this.formID+' :input[type="text"],'+this.formID+' :input[type="email"],'+this.formID+' :input[type="password"],'+this.formID+' :input[type="tel"],'+this.formID+' :input[type="number"],'+this.formID+' :input[type="date"],'+this.formID+' :input[type="checkbox"],'+this.formID+" textarea,"+this.formID+" select")},this.isFormValidated=function(){return e(this.formID+" .invalid").length?!1:!0},this.isValidField=function(i){if(i.disabled||"notrequired"===e(i).attr("data-field-type"))this.isFieldValid=!0;else{var r,s=e(i).attr("data-field-type");switch(s){case"general":r="isGeneralValid";break;case"password":r="isPasswordValid";break;case"passwordConfirm":r="isPasswordConfirmValid";break;case"email":r="isEmailValid";break;case"emailConfirm":r="isEmailConfirmValid";break;case"date":r="isDateValid";break;case"letters":r="isLetters";break;case"numbers":r="isNumbers";break;case"decimals":r="isDecimals";break;case"postCode":r="isPostCodeValid";break;case"checkbox":r="isCheckboxTicked";break;case"select":r="isSelectChosen";break;default:r="isEmpty"}this.isFieldValid=this[r](i)}return this.isFieldValid},this.isEmpty=function(i){return 0===e(i).val().length},this.isGeneralValid=function(e){var i=this.isEmpty(e);return i&&(this.options.general.activeErrorMessage=d(e,"required")),!i},this.isLetters=function(i){var r=this.isEmpty(i),s=/^[A-Za-z ]+$/.test(e(i).val());return r?(this.options.letters.activeErrorMessage=d(i,"required"),!r):(this.options.letters.activeErrorMessage=s?"":d(i,"invalid"),s)},this.isNumbers=function(i){var r=this.isEmpty(i),s=/^[0-9 ]+$/.test(e(i).val());return r?(this.options.numbers.activeErrorMessage=d(i,"required"),!r):(this.options.numbers.activeErrorMessage=s?"":d(i,"invalid"),s)},this.isDecimals=function(i){var r=this.isEmpty(i),s=/^(\d+\.?\d*|\.\d+)$/.test(e(i).val());return r?(this.options.decimals.activeErrorMessage=d(i,"required"),!r):(this.options.decimals.activeErrorMessage=s?"":d(i,"invalid"),s)},this.isPasswordValid=function(i){var r,s,t,o=/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/;return r=this.isEmpty(i),s=a(e(i).val().length,this.options.password.minLength,this.options.password.maxLength),this.options.password.numbers&&this.options.password.letters?(t=o.test(e(i).val()),r?(this.options.password.activeErrorMessage=d(i,"required"),!r):(this.options.password.activeErrorMessage=s&&!t?d(i,"format"):d(i,"invalid"),s?t:!1)):(this.isPasswordConfirmValid(e(this.formID+' input[data-field-type="passwordConfirm"]')),r?(this.options.password.activeErrorMessage=d(i,"required"),!r):(this.options.password.activeErrorMessage=s?"":d(i,"invalid"),s))},this.isPasswordConfirmValid=function(i){if(this.options.password.passwordConfirm){var r=this.isEmpty(i),s=e(i).val()===e(this.formID+' input[data-field-type="password"]').val();return r?(this.options.passwordConfirm.activeErrorMessage=d(i,"required"),!r):(this.options.passwordConfirm.activeErrorMessage=s?"":d(i,"invalid"),s)}},this.isEmailValid=function(i){var r,s,a,t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;r=this.isEmpty(i);var o=/\s/.test(e(i).val());return o&&e(i).val(e(i).val().replace(/\s/g,"")),s=t.test(e(i).val()),""!==this.options.email.domain?(a=-1!==e(i).val().indexOf(this.options.email.domain,e(i).val().length-this.options.email.domain.length),r?(this.options.email.activeErrorMessage=d(i,"required"),!r):(this.options.email.activeErrorMessage=s&&!a?d(i,"domain"):d(i,"invalid"),s?a:!1)):(this.isEmailConfirmValid(e(this.formID+' input[data-field-type="emailConfirm"]')),r?(this.options.email.activeErrorMessage=d(i,"required"),!r):(this.options.email.activeErrorMessage=s?"":d(i,"invalid"),s))},this.isEmailConfirmValid=function(i){if(this.options.email.emailConfirm){var r=this.isEmpty(i),s=e(i).val()===e(this.formID+' input[data-field-type="email"]').val();return r?(this.options.emailConfirm.activeErrorMessage=d(i,"required"),!r):(this.options.emailConfirm.activeErrorMessage=s?"":d(i,"invalid"),s)}},this.isDateValid=function(i){var r,s,t,o,n=e(i).val();r=this.isEmpty(i);var l=new moment(n,this.options.date.format,!0);return s=l.isValid(),o=0===l._pf.charsLeftOver,this.options.date.allowFutureDates||s&&(t=a(Date.parse(l._d),0,Date.now())),r?(this.options.date.activeErrorMessage=d(i,"required"),!r):(s?o?t||(this.options.date.activeErrorMessage=d(i,"allowedDate")):this.options.date.activeErrorMessage=d(i,"format"):this.options.date.activeErrorMessage=o?d(i,"invalid"):1===l._pf.unusedTokens.length||2===l._pf.unusedTokens.length&&2===l._pf.charsLeftOver?d(i,"format"):d(i,"invalid"),s&&o&&t)},this.isPostCodeValid=function(i){var r=this.isEmpty(i),s=checkPostCode(e(i).val());return r?(this.options.postCode.activeErrorMessage=d(i,"required"),!r):(this.options.postCode.activeErrorMessage=s?"":d(i,"invalid"),s)},this.isSelectChosen=function(i){var r=!0;return null===e(i).val()?r=!1:0===e(i).val().length&&(r=!1),this.options.select.activeErrorMessage=r?"":d(i,"required"),r},this.isCheckboxTicked=function(i){var r=e(i).is(":checked");return this.options.checkbox.activeErrorMessage=r?"":d(i,"required"),r},this.showErrorFor=function(i){if(this.options.showErrorMessages)if(e(i).siblings(".form-error").length)o(i);else{var r=t(i),s=n(i);e(i).parent().append(r),e(i).siblings(".form-error").css("width",s+"px"),e(i).siblings(".form-error").css("margin-left",e(i).position().left+"px")}e(i).addClass("invalid"),e(i).trigger("isValid.fieldInvalidated")},this.hideErrorFor=function(i){e(i).removeClass("invalid"),e(i).siblings(".form-error").remove(),e(i).trigger("isValid.fieldValidated")};var a=function(e,i,r){return e>=i&&r>=e},t=function(i){var r=s.options[e(i).data().fieldType].activeErrorMessage;return'<div class="form-error">'+r+"</div>"},o=function(i){var r=s.options[e(i).data().fieldType].activeErrorMessage;e(i).siblings(".form-error").text(r)},n=function(i){return void 0===e(i).attr("aria-hidden")&&e(i).is(":visible")?e(i).outerWidth():Math.max.apply(Math,e(i).parent().children().map(function(){return e(this).width()}).get())},d=function(i,r){var a,t=e(i).data();switch(r){case"required":a="requiredErrorMessage";break;case"invalid":a="invalidErrorMessage";break;case"format":a="formatErrorMessage";break;case"domain":a="domainErrorMessage";break;case"allowedDate":a="allowedDateErrorMessage"}return void 0!==t[a]?t[a]:s.options[e(i).data().fieldType][a]}},e.fn.isValid=function(i){return this.each(function(){var r=new e.isValid(this,i);e(this).data("isValid",r),r.init();var s=e(r.formID+' :input[type="submit"]');s.click(function(e){r.formArray.each(function(i,s){r.isValidField(s)?r.hideErrorFor(s):r.showErrorFor(s),r.isFormValid=r.isFormValidated(),r.isFormValid||e.preventDefault()})}),r.formArray.each(function(i,s){r.options.validateOnBlur&&e(s).on("blur change",function(){r.isValidField(s)?r.hideErrorFor(s):r.showErrorFor(s)}),e(s).on("isValid.fieldInvalidated",function(i){var a={isValid:!1,fieldElement:e(i.currentTarget),fieldData:e(i.currentTarget).data()};r.options[e(s).data().fieldType].callbacks.onInvalidated(a)}),e(s).on("isValid.fieldValidated",function(i){var a={isValid:!0,fieldElement:e(i.currentTarget),fieldData:e(i.currentTarget).data()};r.options[e(s).data().fieldType].callbacks.onValidated(a)})})})},e.isValid.defaults={general:{activeErrorMessage:"",requiredErrorMessage:"Field is required",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},letters:{activeErrorMessage:"",requiredErrorMessage:"Field is required",invalidErrorMessage:"Field is letters only",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},numbers:{activeErrorMessage:"",requiredErrorMessage:"Field is required",invalidErrorMessage:"Field is numbers only",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},decimals:{activeErrorMessage:"",requiredErrorMessage:"Field is required",invalidErrorMessage:"Field is decimals only",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},password:{minLength:6,maxLength:100,numbers:!1,letters:!0,passwordConfirm:!1,activeErrorMessage:"",requiredErrorMessage:"Password is required",formatErrorMessage:"Password should contain numbers and letters",invalidErrorMessage:"Password should be more than 6 characters",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},passwordConfirm:{activeErrorMessage:"",requiredErrorMessage:"Confirming your Password is required",invalidErrorMessage:"Passwords do not match",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},email:{domain:"",emailConfirm:!1,activeErrorMessage:"",requiredErrorMessage:"Email is required",domainErrorMessage:"Email domain should be @xxxx.com",invalidErrorMessage:"Please enter a valid email address",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},emailConfirm:{activeErrorMessage:"",requiredErrorMessage:"Confirming your Email is required",invalidErrorMessage:"Email addresses do not match",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},date:{format:"DD/MM/YYYY",allowFutureDates:!0,activeErrorMessage:"",requiredErrorMessage:"Date is required",formatErrorMessage:"Date format doesn't match DD/MM/YYYY",invalidErrorMessage:"Please enter a valid Date",allowedDateErrorMessage:"Date not allowed",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},postCode:{activeErrorMessage:"",requiredErrorMessage:"Post Code is required",invalidErrorMessage:"Please enter a valid Post Code",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},select:{activeErrorMessage:"",requiredErrorMessage:"Choosing an option is required",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},checkbox:{activeErrorMessage:"",requiredErrorMessage:"Checkbox is required",callbacks:{onValidated:function(e){},onInvalidated:function(e){}}},validateOnBlur:!0,showErrorMessages:!0,onFormValidated:function(){},onFormInvalidated:function(){},validators:{}}}(jQuery);var checkPostCode=function(e){var i="[abcdefghijklmnoprstuwyz]",r="[abcdefghklmnopqrstuvwxy]",s="[abcdefghjkpmnrstuvwxy]",a="[abehmnprvwxy]",t="[abdefghjlnpqrstuwxyz]",o="[abdefghjlnpqrst]",n="[abdefghjlnpqrstuwzyz]",d=[];d.push(new RegExp("^(bf1)(\\s*)([0-6]{1}"+o+"{1}"+n+"{1})$","i")),d.push(new RegExp("^("+i+"{1}"+r+"?[0-9]{1,2})(\\s*)([0-9]{1}"+t+"{2})$","i")),d.push(new RegExp("^("+i+"{1}[0-9]{1}"+s+"{1})(\\s*)([0-9]{1}"+t+"{2})$","i")),d.push(new RegExp("^("+i+"{1}"+r+"{1}?[0-9]{1}"+a+"{1})(\\s*)([0-9]{1}"+t+"{2})$","i")),d.push(/^(GIR)(\s*)(0AA)$/i),d.push(/^(bfpo)(\s*)([0-9]{1,4})$/i),d.push(/^(bfpo)(\s*)(c\/o\s*[0-9]{1,3})$/i),d.push(/^([A-Z]{4})(\s*)(1ZZ)$/i),d.push(/^(ai-2640)$/i);for(var l=e,c=!1,u=0;u<d.length;u++)if(d[u].test(l)){d[u].exec(l),l=RegExp.$1.toUpperCase()+" "+RegExp.$3.toUpperCase(),l=l.replace(/C\/O\s*/,"c/o "),"AI-2640"==e.toUpperCase()&&(l="AI-2640"),c=!0;break}return c?l:!1};